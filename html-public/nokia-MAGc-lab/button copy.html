<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>TopoViewer</title>
		<link href="css/style.css" rel="stylesheet"/>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
		<script defer src="https://use.fontawesome.com/releases/v5.14.0/js/all.js"></script>
		<script defer src="https://cdn.jsdelivr.net/npm/bulma-extensions@4.0.1/bulma-slider/dist/js/bulma-slider.min.js"></script>
	</head>
	<style>
		body { 
			font: 12px helvetica neue, helvetica, arial, sans-serif;
		}
		#edgeLength, #nodeSpacing {
			width: 100%;
		}
		#cy {
			position: fixed;
			left: 0;
			right: 26em;
			top: 5em;
			bottom: 0em;
		}
		#logo {
			top: 20px; 
			left: 30px;
			z-index: 9999;
			position: absolute;
		}
		#Panel-01 {
			top: 60px; 
			right: 10px; 
			width: 350px;
			max-height: 600px;
			overflow-y: auto; 
			position: fixed;
		}
		#Panel-02 {
			bottom: 0px; 
			right: 10px; 
			width: 340px; 
			position: absolute;
		}
		#Panel-03 {
			top: 60px; 
			right: 10px; 
			width: 340px; 
			position: absolute;
		}
		.has-background-4a {
			background-color: #275bd4;
			z-index: 9999;
		}
		.column {
			background-color: white;  
		}
		.panel-tabs {
			background-color: white;  
		}
		.panel-tabContainer {
			background-color: white;
			padding: 0px 0px 0px 0px;  
		}
		.panel-block {
			background-color: white;  
			padding: 0px 0px 0px 0px;  
		}
		.is-smallest {
            font-size: 10px;  
          }
        .is-smaller {
            font-size: 12.5px;  
          }
		.is-smallish {
            font-size: 13px; 
          }
        .is-smallest-element {
            font-size: 11px;  
            padding: 0px 8px;  
			height: 24px;
        }
        .vertical-align-top {
            display: flex;
            flex-direction: column;
            align-items: flex-start;  
            padding-top: 0
        }
        .spacing-button {
            background-color: white;
        }
		.button {
			height: 24px;
		}
		.input {
			height: 24px;
		}
		.link-impairment-widht {
			width: 130px;
			white-space: nowrap;
		}
		.with-outline {
			position: relative;  
		}

		.with-outline::before {
			content: '';  
			position: absolute;  
			bottom: 0;  
			left: 0;  
			width: 100%;  
			border-bottom: 2px solid #3498db;  
			pointer-events: none;  
		  }

		   
		  .hover-text.is-hidden {
			display: none;
		  }
		
		   
		  .hover-text {
			position: absolute;
			 
			border: 1px solid #e8a010; 
			padding: 2px;
			box-shadow: 2px 3px 4px rgba(0, 0, 0, 0.4);
			z-index: 100;  
		  }

				 	
          
          
        
	</style>
	<body>
		<nav class="level m-0 px-3 py-1 has-background-4a">
			<div>
				<p class="title    m-0 px-1 py-0   is-4 is-unselectable has-text-weight-normal has-text-white"> TopoViewer</p>
				<p class="subtitle m-0 px-1 py-0   is-6                 has-text-weight-light  has-text-white" id="ClabSubtitle">Topology name:nokia-MAGc-lab ::: Uptime: 10m10s</p>
			</div>
			<div class="level-right">
				<div id="nokia-logo">
					<img src="images/nokia-logo.png" width="100" hspace="10" vspace="5"><br>
				</div>
				<div class="level-item">
					<div class="dropdown is-hoverable is-right">
						<div class="dropdown-trigger">
							<button class="button is-small is-link is-light" aria-haspopup="true" aria-controls="dropdown-menu3">
								<i class="icon fas fa-solid fa-bars fa-lg" aria-hidden="true"></i>
							</button>
						</div>
						<div class="dropdown-menu" id="dropdown-menu3" role="menu">
							<div class="dropdown-content">
								<div class="dropdown-item">
									<label class="label has-text-weight-normal is-small">Edge Length</label>
									<input id="edgeLength" type="range" min="1" max="1000" step="1" value="50">
								</div>
								<div class="dropdown-item">
									<label class="label has-text-weight-normal is-small">Node Spacing</label>
									<input id="nodeSpacing" type="range" min="1" max="1000" step="1" value="25">
								</div>
								<hr class="dropdown-divider">
								<a href="#" class="dropdown-item">
								With a divider
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</nav>
		<div id="cy-container">
			<div id="cy"></div>
			<div class="panel is-link" id="Panel-02" >
				<p class="panel-heading is-size-7">Log Messages</p>
				<div class="panel-block">
					<textarea class="textarea is-small is-outlined is-expanded" id="notificationTextarea" rows="15"></textarea>
				</div>
				<div class="panel-block">
					<button id="copyToClipboardButton" class="button is-small">Copy to Clipboard</button>
				</div>
			</div>
    		
    		<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.0/lodash.min.js"></script>
    		<script src="https://unpkg.com/webcola@3.3.8/WebCola/cola.min.js"></script>
    		<script src="https://unpkg.com/popper.js@1.14.4/dist/umd/popper.js"></script>
    		<script src="https://unpkg.com/tippy.js@2.6.0/dist/tippy.all.js"></script>
			
    		
			<script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.19.0/cytoscape.min.js"></script>
    		<script src="https://unpkg.com/cytoscape-cola@2.2.3/cytoscape-cola.js"></script>
    		<script src="https://unpkg.com/cytoscape-popper@1.0.2/cytoscape-popper.js"></script>

			<script>

				// CSS TUTORIAL
				//
				// /* Style box-shadow
				// The box-shadow property in CSS is used to create a shadow effect around an element, such as a button or a box. It adds depth and dimension to the element, making it appear raised or floating above the background. Here's the breakdown of the property values:
				// 0px represents the horizontal offset of the shadow. In this case, there is no horizontal offset, so the shadow is directly behind the element.
				// 0px represents the vertical offset of the shadow. There's no vertical offset, so the shadow is right below the element.
				// 5px is the blur radius of the shadow. It determines how blurry or sharp the shadow edges appear. In this case, the shadow is slightly blurry, creating a softer effect.
				// rgba(0, 0, 0, 0.2) specifies the color and transparency of the shadow. It's a black shadow (0, 0, 0 represents black), and the 0.2 alpha value makes it slightly transparent. The alpha value controls the shadow's opacity, with 0 being completely transparent and 1 being fully opaque.
				// */	


			// Initialize a state variable to track the element's presence
			let isPanel01Cy = false;
			let nodeClicked = false;
			let edgeClicked = false;


			document.addEventListener('DOMContentLoaded', function() {
				
				// Reusable function to initialize a WebSocket connection
				function initializeWebSocket(url, onMessageCallback) {
					const protocol = location.protocol === 'https:' ? 'wss://' : 'ws://';
					const socket = new WebSocket(protocol + location.host + url);

					socket.onopen = () => {
						console.log(`Successfully connected WebSocket to ${url}`);
						if (socket.readyState === WebSocket.OPEN) {
							socket.send(`Hi From the WebSocketClient-${url}`);
						}
					};

					socket.onclose = (event) => {
						console.log(`Socket to ${url} closed: `, event);
						socket.send('Client Closed!');
					};

					socket.onerror = (error) => {
						console.log(`Socket to ${url} error: `, error);
					};

					socket.onmessage = onMessageCallback;

					return socket;
				}

				// WebSocket for uptime
				const socketUptime = initializeWebSocket('/uptime', (msgUptime) => {
					const string01 = "Containerlab Topology: Komodo2-" + 'dummy-string';
					const string02 = " ::: Uptime: " + msgUptime.data;

					const ClabSubtitle = document.getElementById("ClabSubtitle");
					const messageBody = string01 + string02;

					ClabSubtitle.innerText = messageBody;
					console.log(ClabSubtitle.innerText);
				});

				// WebSocket for DockerNodeStatus
				const socketDockerNodeStatusInitial = initializeWebSocket('/dockerNodeStatus', (msgDockerNodeStatus) => {
					try {
						const { Names, Status } = JSON.parse(msgDockerNodeStatus.data);
						setNodeDockerStatus(Names, Status);
						console.log(JSON.parse(msgDockerNodeStatus.data));

					} catch (error) {
						console.error("Error parsing JSON:", error);
					}
				});

				// WebSocket for clabServerAddress
				const socketclabServerAddress = initializeWebSocket('/clabServerAddress', (msgclabServerAddress) => {
					console.log(msgclabServerAddress.data);
					document.title = "TopoViewer ::: " + msgclabServerAddress.data;
				});

				var nodeDockerStatusVisibility = true;
				function setNodeDockerStatus(dockerNodeName, dockerNodeStatus) {
					cy.nodes().forEach(function(node) {
						var nodeId = node.data('id');

						// Find the corresponding status nodes based on node ID
						var statusGreenNode = cy.$(`node[name="${nodeId}-statusGreen"]`);
						var statusOrangeNode = cy.$(`node[name="${nodeId}-statusOrange"]`);
						var statusRedNode = cy.$(`node[name="${nodeId}-statusRed"]`);


						if (statusGreenNode.length === 0 || statusRedNode.length === 0) {
							// If status nodes are not found, skip this node
							return;
						}

						// Update positions of status nodes relative to the node
						var nodePosition = node.position();
						var offset = { x: -4, y: -10 };
						var statusGreenNodePosition = { x: nodePosition.x + offset.x, y: nodePosition.y + offset.y };
						var statusRedNodePosition = { x: nodePosition.x + offset.x, y: nodePosition.y - offset.y };

						// Check if the nodeDockerStatusVisibility is true
						if (nodeDockerStatusVisibility) {
							// Check if the dockerNodeName includes nodeId and dockerNodeStatus includes 'healthy'
							if (dockerNodeName.includes(nodeId) && (dockerNodeStatus.includes("Up") || dockerNodeStatus.includes("healthy") ) ) {  // Good state for sros is 'Up 9 days (healthy)'', but for linux is 'Up 9 days'.
								statusGreenNode.show();
								statusRedNode.hide();
								console.log("nodeDockerStatusVisibility: " + nodeDockerStatusVisibility);
							} else if (dockerNodeName.includes(nodeId) && dockerNodeStatus.includes("(health: starting)")) {  // booting state for SROS is '(health: starting)'
								statusGreenNode.hide();
								statusOrangeNode.show();
							} else if (dockerNodeName.includes(nodeId) && dockerNodeStatus.includes("Exited")) { // bad state for all docker is 'Status': 'Exited (0) 3 weeks ago'
								statusGreenNode.hide();
								statusRedNode.show();
							}
						} else {
							statusGreenNode.hide();
							statusRedNode.hide();
						}

						statusGreenNode.position(statusGreenNodePosition);
						statusRedNode.position(statusRedNodePosition);
					});
				}


				//- Initialize Cytoscape.js
				const cy = cytoscape({
					container: document.getElementById('cy'),
					elements: [],
					style: [
					{
						selector: 'node',
						style: {
							'background-color': '#3498db',
							'label': 'data(label)'
						}
					}]
				});				

				//- Load and apply Cytoscape styles from cy-style.json using fetch
				fetch('cy-style.json')
				.then(response => response.json())
				.then(styles => {
					//- Apply styles loaded from cy-style.json
					cy.style().fromJson(styles).update();
				})
				.catch(error => {
					console.error('Oops, we hit a snag! Couldnt load the cyto styles, bro.', error);
					appendMessage(`Oops, we hit a snag! Couldnt load the cyto styles, bro.: ${error}`);
				});


				// Fetch and load element data from a JSON file
				fetch('dataCytoMarshall-nokia-MAGc-lab.json')
					.then(response => response.json())
					.then(elements => {
						// Add the elements to the Cytoscape instance
						cy.add(elements);
						//- run layout
						const layout = cy.layout({
							name: 'cola',
							nodeSpacing: 5,
							edgeLengthVal: 45,
							animate: true,
							randomize: false,
							maxSimulationTime: 1500
						});
						layout.run();
						// remove node topoviewer
						topoViewerNode = cy.filter('node[name = "topoviewer"]');
						topoViewerNode.remove()
					})
					.catch(error => {
						console.error('Error loading graph data:', error);
					});


				// hover text element
				const hoverText = document.createElement('box');
				hoverText.classList.add('hover-text', 'is-hidden', 'box', 'has-text-weight-normal', 'is-warning', 'is-smallest');
				hoverText.textContent = 'Launch CloudShell.';
				document.body.appendChild(hoverText);


				//- Toggle the Panel-01 when clicking on the cy container 
				document.getElementById('cy').addEventListener('click', function (event) {
					//- This code will be executed when you click anywhere in the Cytoscape container
					//- You can add logic specific to the container here

					if (!nodeClicked && !edgeClicked) {
						if (!isPanel01Cy) {
							removeElementById("Panel-01");
							// Define tabContentFns with custom content generation functions
							// createNetworkExplorerTab is has corresponding function with similar name.
							const tabContentFns = [createNetworkExplorerTab, createNetworkBuilderTab];
							const tabContentFnsArg = ["createNetworkExplorerTab", "createNetworkBuilderTab"];

							createContentPanel('Panel-01', tabContentFns, tabContentFnsArg, "Actions");
						}else {
							removeElementById("Panel-01");
							appendMessage(`"try to remove panel01-Cy"`)
						}
					}
					nodeClicked = false; 
					edgeClicked = false; 

					appendMessage(`"isPanel01Cy-cy: " ${isPanel01Cy}`)
					appendMessage(`"nodeClicked: " ${nodeClicked}`)
				});

				// Click event listener for nodes
				cy.on('click', 'node', function (event) {
					// This code will be executed when you click on a node
					const node = event.target		
					nodeClicked = true; 

					// You can add logic specific to nodes here
					removeElementById("Panel-01");
					const tabContentFns = [createNodeDetailTab];
					const tabContentFnsArg = [node];

					createContentPanel('Panel-01', tabContentFns, tabContentFnsArg[0], 'Node Properties');

					appendMessage(`"isPanel01Cy-cy: " ${isPanel01Cy}`)
					appendMessage(`"nodeClicked: " ${nodeClicked}`)						
				});

				// Click event listener for edges
				cy.on('click', 'edge', function(event) {
					// This code will be executed when you click on a node
					// You can add logic specific to nodes here
					const edge = event.target		
					edgeClicked = true; 

					// You can add logic specific to nodes here
					removeElementById("Panel-01");
					const tabContentFns = [createEdgeDetailTab];
					tabContentFnsArg = [edge];

					createContentPanel('Panel-01', tabContentFns, tabContentFnsArg[0], 'Link Properties');

					appendMessage(`"isPanel01Cy-cy: " ${isPanel01Cy}`)
					appendMessage(`"nodeClicked: " ${nodeClicked}`)
				});
			
				// ######################################################
				// Start of JS Functions HTML Element Creation section
				// Start of JS Functions HTML Element Creation section
				// ######################################################

				// Function to create the Panel-01-nodeDetail content
				function createContentPanelAction() {
					const panel = document.createElement('div');
					panel.className = 'panel';
					panel.id = 'Panel-03';
					panel.style.display = 'block';
					// Create the panel heading
					const panelHeading = document.createElement('p');
					panelHeading.className = 'panel-heading is-size-7';
					panelHeading.textContent = 'Node Detail';
					// Create the panel tabs
					const panelTabs = document.createElement('p');
					panelTabs.className = 'panel-tabs';
					// Array of tab names
					const tabNames = ['Network Explorer', 'Network Builder', 'Tab-03', 'Tab-04', 'Tab-05'];
					// Create tabs dynamically
					for (const name of tabNames) {
						const tab = document.createElement('a');
						tab.className = 'toggle-Panel01-tab is-smallest';
						tab.setAttribute('data-target', `Panel-01-nodeDetail--Tab-${name}-Container`);
						tab.id = `Panel-01-nodeDetail--Tab-${name}-Button`;
						tab.textContent = name;
						panelTabs.appendChild(tab);
					}
					// Append the panel heading and tabs to the panel
					panel.appendChild(panelHeading);
					panel.appendChild(panelTabs);

					// Append the panel to the document body or another container of your choice
					document.body.appendChild(panel);


				}				

				// Call createContentPanel with the panel ID and an array of tab content functions
				// The Tab name will be auto generate by the tabFunction names, ie: funtion name: createNetworkExplorerTab --> tab name: NetworkExplorer
				function createContentPanel(panelId, tabContentFns, tabContentFnsArg, panelHeadingText) {
					appendMessage(`"createContentPanel reach:`)
	
					const tabNames = tabContentFns.map(fn => fn.name);
				  
					const panel = document.createElement('div');
					panel.className = 'panel is-link';
					panel.id = panelId;
					panel.style.display = 'block';
				  
					const panelHeading = document.createElement('p');
					panelHeading.className = 'panel-heading is-size-7';
					panelHeading.textContent = panelHeadingText;
				  
					const panelTabs = document.createElement('p');
					panelTabs.className = 'panel-tabs';
				  
					const tabContainers = [];
					
					// Check if the tabContentFns have more than 1 element
					if (tabContentFns.length != 1) {
						for (let i = 0; i < tabNames.length; i++) {
						  	const name = tabNames[i];
						  	const tab = document.createElement('a');
						  	tab.className = 'toggle-Panel01-tab is-smallish has-text-weight-medium';
						  	tab.setAttribute('data-target', `${panelId}-Tab-${name}-Container`); 
						  	tab.id = `${panelId}-Tab-${name}-Button`;
						  	tab.textContent = name.replace(/^create|Tab$/g, ''); 

						  	panelTabs.appendChild(tab);

						  	const tabContainer = document.createElement('div');
						  	tabContainer.className = 'panel-tabContainer';
						  	tabContainer.id = `${panelId}-Tab-${name}-Container`;

						  	tabContainers.push(tabContainer);

						  	// Generate tab content using the provided function from tabContentFns
						  	if (tabContentFns[i] && typeof tabContentFns[i] === 'function') {
								const tabContent = tabContentFns[i]();
								tabContainer.appendChild(tabContent);
						  	}
							panel.appendChild(panelHeading);
							panel.appendChild(panelTabs);
						}
					}else{
						// const name = tabNames[0];
						// const tab = document.createElement('a');
						// tab.className = 'toggle-Panel01-tab is-smallish has-text-weight-medium';
						// tab.setAttribute('data-target', `${panelId}-Tab-${name}-Container`); 
						// tab.id = `${panelId}-Tab-${name}-Button`;
						// tab.textContent = name.replace(/^create|Tab$/g, ''); 
						// panelTabs.appendChild(tab);

						const tabContainer = document.createElement('div');
						tabContainer.className = 'panel-tabContainer';
						tabContainer.id = `${panelId}-Tab-${name}-Container`;
						tabContainers.push(tabContainer);
						
						// Generate tab content using the provided function from tabContentFns
						if (tabContentFns[0] && typeof tabContentFns[0] === 'function') {
							const tabContent = tabContentFns[0](tabContentFnsArg, panelHeadingText); 
							console.log("tabContentFnsArg")

							console.log(tabContentFnsArg)
							panel.appendChild(panelHeading);
							panel.appendChild(tabContent);
						}
					}	
				  

					
					// Check if the tabContentFns have more than 1 element
					if (tabContentFns.length != 1) {
						// initial hide all tab and only opent the first tab
						for (const tabContainer of tabContainers) {
							tabContainer.style.display = 'none';
						 	panel.appendChild(tabContainer);
						}
						tabContainers[0].style.display = 'block';					
					}

					document.body.appendChild(panel);
				  
					const toggleButtons = document.querySelectorAll('.toggle-Panel01-tab');

					toggleButtons.forEach(tab => {
					  	tab.addEventListener('click', () => {
							const targetTabId = tab.getAttribute('data-target');
							const selectedTabContainer = document.getElementById(targetTabId);

							// Hide all tab containers
							tabContainers.forEach(container => {
							  container.style.display = 'none';
							});

							// Show the selected tab container
							selectedTabContainer.style.display = 'block';
				  
							console.log(`Panel-${targetTabId} is displayed.`);
							appendMessage(`Panel-${targetTabId} is displayed.`);
					  	});
					});
				}
				  
				function createNetworkExplorerTab() {
					// const content = document.createElement('div');
					// content.textContent = `Content for 1`;
					// return content;
					// Create a div container for Tab-01 content
					const tab01Container = document.createElement('div');
				
					// Create the first block of content
					const block1 = document.createElement('div');
					block1.className = 'panel-block';
				
					// Create the 'Network Maker' section
					const nodeGenerate = document.createElement('div');
					nodeGenerate.id = 'nodeGenerate';
					nodeGenerate.className = 'column my-auto';
				
					const networkMakerLabel = document.createElement('label');
					networkMakerLabel.className = 'label is-smallest';
					networkMakerLabel.setAttribute('for', 'generateNodesInput');
					networkMakerLabel.textContent = 'Network Maker:';
				
					const generateNodesInput = document.createElement('input');
					generateNodesInput.className = 'input is-smallest-element';
					generateNodesInput.type = 'text';
					generateNodesInput.id = 'generateNodesInput';
					generateNodesInput.placeholder = 'Wiro Sableng';
					generateNodesInput.value = '212';
				
					const generateNodesButton = document.createElement('button');
					generateNodesButton.className = 'button is-smallest-element';	
					generateNodesButton.id = 'generateNodesButton';
					generateNodesButton.textContent = 'Generate';
				
					nodeGenerate.appendChild(networkMakerLabel);
					nodeGenerate.appendChild(generateNodesInput);
					nodeGenerate.appendChild(generateNodesButton);
				
					// block1.appendChild(nodeAttributes);
					block1.appendChild(nodeGenerate);
				
					// Create the second block of content
					const block2 = document.createElement('div');
					block2.className = 'panel-block';
				
					// Create the 'Find Node' section
					const findNodeDiv = document.createElement('div');
					findNodeDiv.id = 'nodeFind';
					findNodeDiv.className = 'column my-auto';

					const findNodeLabel = document.createElement('label');
					findNodeLabel.className = 'label is-smallest';
					findNodeLabel.textContent = 'Find Node :';
				
					const nodeFindInput = document.createElement('input');
					nodeFindInput.className = 'input is-smallest-element';
					nodeFindInput.type = 'text';
					nodeFindInput.id = 'nodeFindInput';
					nodeFindInput.placeholder = 'Node Name';

					const nodeFindInvis01 = document.createElement('input');
					nodeFindInvis01.className = 'input is-invisible is-smallest-element';
					nodeFindInvis01.type = 'text';
				
					const nodeFindButton = document.createElement('button');
					nodeFindButton.className = 'button is-smallest-element';
					nodeFindButton.id = 'nodeFindButton';
					nodeFindButton.textContent = 'Find';
				
					const zoomToFitButton = document.createElement('button');
					zoomToFitButton.className = 'button is-smallest-element';
					zoomToFitButton.id = 'fitAllNodesAction';
					zoomToFitButton.textContent = 'Zoom to Fit';
				
					findNodeDiv.appendChild(findNodeLabel);
					findNodeDiv.appendChild(nodeFindInput);
					findNodeDiv.appendChild(nodeFindInvis01);
					findNodeDiv.appendChild(nodeFindButton);
					findNodeDiv.appendChild(zoomToFitButton);
				
					block2.appendChild(findNodeDiv);
				
					// Create the 'Path Finder' section
					const pathFinderDiv = document.createElement('div');
					pathFinderDiv.id = 'pathFinder';
					pathFinderDiv.className = 'column my-auto';
				
					const pathFinderLabel = document.createElement('label');
					pathFinderLabel.className = 'label is-smallest';
					pathFinderLabel.textContent = 'Path Finder:';
				
					const pathFinderSourceNodeInput = document.createElement('input');
					pathFinderSourceNodeInput.className = 'input is-smallest-element';
					pathFinderSourceNodeInput.type = 'text';
					pathFinderSourceNodeInput.id = 'pathFinderSourceNodeInput';
					pathFinderSourceNodeInput.placeholder = 'Source Node Name';
				
					const pathFinderTargetNodeInput = document.createElement('input');
					pathFinderTargetNodeInput.className = 'input is-smallest-element';
					pathFinderTargetNodeInput.type = 'text';
					pathFinderTargetNodeInput.id = 'pathFinderTargetNodeInput';
					pathFinderTargetNodeInput.placeholder = 'Target Node Name';
				
					const pathFinderDijkstraButton = document.createElement('button');
					pathFinderDijkstraButton.className = 'button is-smallest-element';
					pathFinderDijkstraButton.id = 'pathFinderDijkstraButton';
					pathFinderDijkstraButton.textContent = 'Find Path Dijkstra';
				
					pathFinderDiv.appendChild(pathFinderLabel);
					pathFinderDiv.appendChild(pathFinderSourceNodeInput);
					pathFinderDiv.appendChild(pathFinderTargetNodeInput);
					pathFinderDiv.appendChild(pathFinderDijkstraButton);
				
					block2.appendChild(pathFinderDiv);
				
					// Create the fifth block of content
					const block5 = document.createElement('div');
					block5.className = 'panel-block';
				
					// Create the 'Close' button
					const closePanel01Button = document.createElement('button');
					closePanel01Button.className = 'button is-smallest-element';
					closePanel01Button.id = 'closeForm';
					closePanel01Button.textContent = 'Close';
				
					block5.appendChild(closePanel01Button);
				
					// Append all blocks to the Tab-01 container
					tab01Container.appendChild(block1);
					tab01Container.appendChild(block2);
					//tab01Container.appendChild(block3);
					tab01Container.appendChild(block5);

					// call event handler function
					generateNodesButton.addEventListener('click', generateNodesEvent)
					nodeFindButton.addEventListener('click', nodeFindEvent)
					zoomToFitButton.addEventListener('click', zoomToFitEvent)
					pathFinderDijkstraButton.addEventListener('click', pathFinderDijkstraEvent)
					closePanel01Button.addEventListener('click', closePanel01Event)

					return tab01Container;
				}
				  
				function createNetworkBuilderTab() {
					// const content = document.createElement('div');
					// content.textContent = `Contentaaa for 2 `;
					// return content;

					// Create a div container for Tab-01 content
					const tab02Container = document.createElement('div');
				
					// Create the first block of content
					const block1 = document.createElement('div');
					block1.className = 'panel-block';
				
					// Create the 'Node Spawner' section
					const nodeAttributes = document.createElement('div');
					nodeAttributes.id = 'nodeAttributes';
					nodeAttributes.className = 'column my-auto';
				
					const nodeNameLabel = document.createElement('label');
					nodeNameLabel.className = 'label is-smallest';
					nodeNameLabel.setAttribute('for', 'nodeName');
					nodeNameLabel.textContent = 'Node Spawner:';
				
					const nodeNameInput = document.createElement('input');
					nodeNameInput.className = 'input is-smallest-element';
					nodeNameInput.type = 'text';
					nodeNameInput.id = 'nodeName';
					nodeNameInput.placeholder = 'Node Name';
				
					const nodeNameInput1 = document.createElement('input');
					nodeNameInput1.className = 'input is-invisible is-smallest-element';
					nodeNameInput1.type = 'text';
				
					const spawnNodeButton = document.createElement('button');
					spawnNodeButton.className = 'button is-smallest-element';
					spawnNodeButton.id = 'spawnNodeButton';
					spawnNodeButton.textContent = 'Spawn Node';
				
					nodeAttributes.appendChild(nodeNameLabel);
					nodeAttributes.appendChild(nodeNameInput);
					nodeAttributes.appendChild(nodeNameInput1);
					nodeAttributes.appendChild(spawnNodeButton);
				
					block1.appendChild(nodeAttributes);
				
					// Create the 'Network Builder' section
					const networkBuilderkDiv = document.createElement('div');
					networkBuilderkDiv.id = 'networkBuilder';
					networkBuilderkDiv.className = 'column my-auto';

					const networkBuilderkLabel = document.createElement('label');
					networkBuilderkLabel.className = 'label is-smallest';
					networkBuilderkLabel.textContent = 'Link Spawner :';
				
					const createLinkSourceNodeInput = document.createElement('input');
					createLinkSourceNodeInput.className = 'input is-smallest-element';
					createLinkSourceNodeInput.type = 'text';
					createLinkSourceNodeInput.id = 'createLinkSourceNodeInput';
					createLinkSourceNodeInput.placeholder = 'Source Node Name';
				
					const createLinkTargetNodeInput = document.createElement('input');
					createLinkTargetNodeInput.className = 'input is-smallest-element';
					createLinkTargetNodeInput.type = 'text';
					createLinkTargetNodeInput.id = 'createLinkTargetNodeInput';
					createLinkTargetNodeInput.placeholder = 'Target Node Name';
				
					const connectNodesButton = document.createElement('button');
					connectNodesButton.className = 'button is-smallest-element';
					connectNodesButton.id = 'connectNodesAction';
					connectNodesButton.textContent = 'Spawn Link';
				
					networkBuilderkDiv.appendChild(networkBuilderkLabel);
					networkBuilderkDiv.appendChild(createLinkSourceNodeInput);
					networkBuilderkDiv.appendChild(createLinkTargetNodeInput);
					networkBuilderkDiv.appendChild(connectNodesButton);
				
					block1.appendChild(networkBuilderkDiv);
				
					// Create the fifth block of content
					const block5 = document.createElement('div');
					block5.className = 'panel-block';
				
					// Create the 'Close' button
					const closePanel01Button = document.createElement('button');
					closePanel01Button.className = 'button is-smallest-element';
					closePanel01Button.id = 'closeForm';
					closePanel01Button.textContent = 'Close';
				
					block5.appendChild(closePanel01Button);
				
					// Append all blocks to the Tab-01 container
					tab02Container.appendChild(block1);
					tab02Container.appendChild(block5);
				
					// call event handler function
					spawnNodeButton.addEventListener('click', spawnNodeEvent)
					closePanel01Button.addEventListener('click', closePanel01Event)

					return tab02Container;
				}

				function createPanelBlockContainer(tabContainerId) {
					// this is helper function to create PanelBlock-Container
					const panelBlock = document.createElement('div');
					panelBlock.id = `panelBlock-${tabContainerId}`
					panelBlock.className = 'panel-block py-2';
				
					const divPanelBlock = document.createElement('div');
					divPanelBlock.id = `${panelBlock.id}-divPanelBlock`
					divPanelBlock.className = 'column p-0';

					return{
						panelBlock: panelBlock,
						divPanelBlock: divPanelBlock,
					}
				}

				function createPanelBlockForm(PanelColumnsConfig, panelBlock, divPanelBlock) {
					// This is helper function to create PanelBlock-Form-Content
					// Usage: 
					// // Panel Block 01
					// // Start of mandatory panelContent containercontainer
					// const panelBlock01 = document.createElement('div');
					// panelBlock01.id = `panelBlock01-${modifiedHeaderText}`
					// panelBlock01.className = 'panel-block p-0';
				
					// const divPanelBlock01 = document.createElement('div');
					// divPanelBlock01.id = `${panelBlock01.id}-divPanelBlock01-`
					// divPanelBlock01.className = 'column ';
					// // End of mandatory panelContent containercontainer
				
					// const Panel01ColumnsConfig = [
					// 	{ idSuffix: 'labelNodeName', textContent: 'Node Name', className: 'link-impairment-widht', columntInputType: 'field', columntInputContent: node.data('name'), 						
					// 		addonsContent: [
					// 		{
					// 			name: 'blue',
					// 			iconClass: 'fas fa-terminal'
					// 		},
					// 		{
					// 			name: 'green',
					// 			iconClass: 'fas fa-copy'
					// 		}]},
					// 	{ idSuffix: 'labelKind', textContent: 'Kind', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').kind },
					// 	{ idSuffix: 'labelImage', textContent: 'Image', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').image },
					// 	{ idSuffix: 'labelManagementIPv4', textContent: 'Management IPv4', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').mgmtIpv4Addresss },
					// 	{ idSuffix: 'labelManagement IPv6', textContent: 'Management IPv6', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').mgmtIpv6Addresss },
					// 	{ idSuffix: 'labelFqdn', textContent: 'FQDN', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').fqdn },
					// 	{ idSuffix: 'labelGroup', textContent: 'Group', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').group },
					// 	{ idSuffix: 'labelTopoviewerRole', textContent: 'Topoviewer Role', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('topoviewerRole') },					
					//  { idSuffix: 'labelLinkImpairment', textContent: 'Link Impairment', className: 'link-impairment-widht', columntInputType: 'field', columntInputContent: 'Apply', columntInputAttribute: 'enabled', // columntInputAttribute default is disabled
					//  addonsContent: [
					//  	{
					//  		name: 'blue',
					//  		iconClass: 'fas fa-terminal'
					//  	},
					//  	{
					//  		name: 'green',
					//  		iconClass: 'fas fa-copy'
					//  	}]},
					//  ];
					// ];
				
					// createPanelBlockForm(Panel01ColumnsConfig, panelBlock01, divPanelBlock01)
				
					PanelColumnsConfig.forEach(config => {
						// Create columnContainer
						const columnContainer = document.createElement('div');
						columnContainer.id = `${divPanelBlock.id}-columnContainer${config.idSuffix}`
						columnContainer.className = 'column my-auto';
				
						// Create panelContent
						const panelContent = document.createElement('div');
						panelContent.id = `${columnContainer.id}-panelContent${config.idSuffix}`
						panelContent.className = 'panel-content';
				
						// Create columnsPanelContent container
						const columnsPanelContent = document.createElement('div');
						columnsPanelContent.className = 'columns py-auto';
						columnsPanelContent.id = `${panelContent.id}-columnsPanelContent${config.idSuffix}`
				
						// Create labelColumn column
						const labelColumn = document.createElement('div');
						labelColumn.className = 'column is-4 p-1';
						labelColumn.id = `${columnsPanelContent.id}-labelColumn${config.idSuffix}`
				
						const labelElement = document.createElement('label');
						labelElement.className = 'label is-size-7 has-text-right has-text-weight-medium px-auto';
						labelElement.textContent = config.textContent;
						labelElement.id = `${labelColumn.id}-labelElement${config.idSuffix}`
				
						labelColumn.appendChild(labelElement);
						columnsPanelContent.appendChild(labelColumn);
				
						// Create inputColumn column
						if (config.columntInputType == 'label'){
							const inputColumn = document.createElement('div');
							inputColumn.className = `column is-8 p-1 pl-3`;
							inputColumn.id = `${labelColumn.id}-inputColumn${config.idSuffix}`
					
							const inputElement = document.createElement('label');
							inputElement.className = `label is-size-7 has-text-left link-impairment-widht has-text-weight-normal mr-0 is-max-content`;
							inputElement.id = `${inputColumn.id}-label${config.idSuffix}`
							inputElement.textContent = config.columntInputContent;

							inputColumn.appendChild(inputElement);
							columnsPanelContent.appendChild(inputColumn);

						}else if (config.columntInputType == 'button') {
							const inputColumn = document.createElement('div');
							inputColumn.className = `column is-8 p-1 pl-3`;
							inputColumn.id = `${labelColumn.id}-inputColumn${config.idSuffix}`
					
							const inputElement = document.createElement('button');
							inputElement.className = `button is-size-7-desktop link-impairment-widht is-smallest-element is-justify-content-flex-start is-link fa-regular fa-network-wired`; 
							inputElement.id = `${inputColumn.id}-label${config.idSuffix}`
							inputElement.textContent = config.columntInputContent;
					
							inputColumn.appendChild(inputElement);
							columnsPanelContent.appendChild(inputColumn);

						}else if (config.columntInputType == 'input') {
							const inputColumn = document.createElement('div');
							inputColumn.className = `column is-8 p-1 pl-3`;
							inputColumn.id = `${labelColumn.id}-inputColumn${config.idSuffix}`
					
							const inputElement = document.createElement('input');
							inputElement.className = `input is-size-7-desktop has-text-left link-impairment-widht has-text-weight-normal is-smallest-element`;
							inputElement.id = `${inputColumn.id}-label${config.idSuffix}`
							inputElement.type = 'text'
							inputElement.value = config.columntInputContent
					
							inputColumn.appendChild(inputElement);
							columnsPanelContent.appendChild(inputColumn);
						}else if (config.columntInputType == 'field') {
							const inputColumn = document.createElement('div');
							inputColumn.className = `column is-8 p-1 pl-3`;
							inputColumn.id = `${labelColumn.id}-inputColumn${config.idSuffix}`
					
							const inputElement = document.createElement('div');
							inputElement.className = `field has-addons`;
							inputElement.id = `${inputColumn.id}-label${config.idSuffix}`

							// create addon input
							const controlId = `${inputElement.id}-control`;
							const control = document.createElement('p');
							control.className = 'control';
							control.id = controlId;
							const input = document.createElement('input');
							input.id = `${controlId}-input`;

							if (config.columntInputAttribute == 'enabled'){
								input.setAttribute('enabled', '')
							}else{
								input.setAttribute('disabled','')
							}

							input.className = `input is-size-7-desktop has-text-left link-impairment-widht has-text-weight-normal is-smallest-element`; 
							input.value = config.columntInputContent;
							control.appendChild(input);
							inputElement.appendChild(control);

							// create addon button
							addons = config.addonsContent

							for (let i = 0; i < addons.length; i++) {
								const addon = addons[i];
								const controlId = `${inputElement.id}-control${addon.name}}`;
								const control = document.createElement('p');
								control.className = 'control';
								control.id = controlId;
							  
								const button = document.createElement('button');
								button.id = `${controlId}-button${addon.name}}`;
								button.className = `button px-3 is-smallest-element is-${addon.name === 'blue' ? 'link' : 'success'}`;
							  
								const icon = document.createElement('span');
								icon.className = 'icon is-small';
								const iconElement = document.createElement('i');
								iconElement.className = addon.iconClass;
								icon.appendChild(iconElement);
								button.appendChild(icon);

								// Create a hover text paragraph element
								const hoverText = document.querySelector('.hover-text');

								// Add event listeners for hover behavior
								button.addEventListener('mouseover', () => {
									// Calculate the position for the hover text
									const rect = button.getBoundingClientRect();
									const top = rect.top - hoverText.offsetHeight + 25; 
									const left = rect.left + (button.offsetWidth - hoverText.offsetWidth) / 2; 

									// Set the position and show the hover text
									hoverText.style.top = `${top}px`;
									hoverText.style.left = `${left}px`;
									hoverText.classList.remove('is-hidden');
									hoverText.textContent = addon.hoverMessage;
								});

								button.addEventListener('mouseout', () => {
									// Hide the hover text
									hoverText.classList.add('is-hidden');
								});



								control.appendChild(button);
								inputElement.appendChild(control);
							  }

							inputColumn.appendChild(inputElement);
							columnsPanelContent.appendChild(inputColumn);
						}

				
						panelContent.appendChild(columnsPanelContent);
						columnContainer.appendChild(panelContent)
				
						divPanelBlock.appendChild(columnContainer)
						
					});
				}
					
				function createNodeDetailTab(node, panelHeadingText) {
					const modifiedHeaderText = panelHeadingText.replace(/\s+/g, '');
					// Create the tab-container 
					const tabContainer = document.createElement('div');
					tabContainer.id = `tabContainer-${modifiedHeaderText}`
					tabContainer.className = 'panel-tabContainer';

					// Panel Block 01
					panelBlockContainer = createPanelBlockContainer(tabContainer.id)
					panelBlock01 = panelBlockContainer.panelBlock
					divPanelBlock01 = panelBlockContainer.divPanelBlock

					const Panel01ColumnsConfig = [
						{ idSuffix: 'labelNodeName', textContent: 'Node Name', className: 'link-impairment-widht', columntInputType: 'field', columntInputContent: node.data('name'), 						
							addonsContent: [
							{
								name: 'blue',
								iconClass: 'fas fa-terminal',
								hoverMessage: 'Click to open a web-based SSH console'
							},
							{
								name: 'green',
								iconClass: 'far fa-clone',
								hoverMessage: 'Click to copy the SSH command to your clipboard.'
							}]},
						{ idSuffix: 'labelKind', textContent: 'Kind', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').kind },
						{ idSuffix: 'labelImage', textContent: 'Image', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').image },
						{ idSuffix: 'labelManagementIPv4', textContent: 'Management IPv4', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').mgmtIpv4Addresss },
						{ idSuffix: 'labelManagement IPv6', textContent: 'Management IPv6', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').mgmtIpv6Addresss },
						{ idSuffix: 'labelFqdn', textContent: 'FQDN', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').fqdn },
						{ idSuffix: 'labelGroup', textContent: 'Group', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('extraData').group },
						{ idSuffix: 'labelTopoviewerRole', textContent: 'Topoviewer Role', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: node.data('topoviewerRole') },					
					];

					createPanelBlockForm(Panel01ColumnsConfig, panelBlock01, divPanelBlock01)
						
					// Per panelBlock divPanelBlock01 --> panelBlock01
					panelBlock01.appendChild(divPanelBlock01)
				
					// --> tabContainer
					tabContainer.appendChild(panelBlock01)

					return tabContainer
				}
	
				function createEdgeDetailTab(edge, panelHeadingText) {
					const modifiedHeaderText = panelHeadingText.replace(/\s+/g, '');
				
					// Create the tab-container 
					const tabContainer = document.createElement('div');
					tabContainer.id = `tabContainer-${modifiedHeaderText}`
					tabContainer.className = 'panel-tabContainer';

					// Panel Block 01
					panelBlockContainer = createPanelBlockContainer(tabContainer.id)
					panelBlock01 = panelBlockContainer.panelBlock
					divPanelBlock01 = panelBlockContainer.divPanelBlock

					const Panel01ColumnsConfig = [
						{ idSuffix: 'LinkName', textContent: 'Link Name', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: edge.data('source') +"---"+ edge.data('target') },
						{ idSuffix: 'Source', textContent: 'Source', className: 'link-impairment-widht', columntInputType: 'label', columntInputContent: edge.data('source') + "::" + edge.data('sourceEndpoint') },
						{ idSuffix: 'Target', textContent: 'Target', className: 'link-impairment-widht', columntInputType: 'label' , columntInputContent: edge.data('target') + "::" + edge.data('targetEndpoint') },
						{ idSuffix: 'SourceMac', textContent: 'Source MAC', className: 'link-impairment-widht', columntInputType: 'label' , columntInputContent: '' },
						{ idSuffix: 'TargetMac', textContent: 'Target Mac', className: 'link-impairment-widht', columntInputType: 'label' , columntInputContent: '' },
					];

					createPanelBlockForm(Panel01ColumnsConfig, panelBlock01, divPanelBlock01)

					// append divPanelBlock02 --> panelBlock02 --> tabContainer
					panelBlock01.append(divPanelBlock01)
					tabContainer.appendChild(panelBlock01)
				
					// Panel Block 02
					panelBlockContainer = createPanelBlockContainer(tabContainer.id)
					panelBlock02 = panelBlockContainer.panelBlock
					divPanelBlock02 = panelBlockContainer.divPanelBlock

					const Panel02ColumnsConfig = [
						{ idSuffix: 'labelCaptureSourceEndpoint', textContent: 'Capture Source Endpoint', className: 'link-impairment-widht', columntInputType: 'field', columntInputContent: edge.data('source') + "::" + edge.data('sourceEndpoint'),
							addonsContent: [
							{
								name: 'blue',
								iconClass: 'fas fa-ethernet'
							},
							{
								name: 'green',
								iconClass: 'far fa-clone'
							}]},
						{ idSuffix: 'labelCaptureSourceEndpoint', textContent: 'Capture Source Endpoint', className: 'link-impairment-widht', columntInputType: 'field', columntInputContent: edge.data('target') + "::" + edge.data('targetEndpoint'),
							addonsContent: [
							{
								name: 'blue',
								iconClass: 'fas fa-ethernet'
							},
							{
								name: 'green',
								iconClass: 'far fa-clone'
							}]}, 
					];

			
					createPanelBlockForm(Panel02ColumnsConfig, panelBlock02, divPanelBlock02)

					// append divPanelBlock02 --> panelBlock02 --> tabContainer
					panelBlock02.append(divPanelBlock02)
					tabContainer.appendChild(panelBlock02)
				

					// Panel Block 03
					panelBlockContainer = createPanelBlockContainer(tabContainer.id)
					panelBlock03 = panelBlockContainer.panelBlock
					divPanelBlock03 = panelBlockContainer.divPanelBlock

					const Panel03ColumnsConfig = [
						{ idSuffix: 'labelDelay', textContent: 'Delay (ms)', className: 'link-impairment-widht', columntInputType: 'input', columntInputContent: '0' },
						{ idSuffix: 'labelJitter', textContent: 'Jitter (ms', className: 'link-impairment-widht', columntInputType: 'input', columntInputContent: '0' },
						{ idSuffix: 'labelRate', textContent: 'Rate (kbps', className: 'link-impairment-widht', columntInputType: 'input', columntInputContent: '0' },
						{ idSuffix: 'labelLoss', textContent: 'Loss (%)', className: 'link-impairment-widht', columntInputType: 'input', columntInputContent: '0' },
						{ idSuffix: 'labelDuration', textContent: 'Duration (min.)', className: 'link-impairment-widht', columntInputType: 'field', columntInputContent: '1', columntInputAttribute: 'enabled', 
						addonsContent: [
							{
								name: 'blue',
								iconClass: 'fas fa-stopwatch'
							}]},
						];

					createPanelBlockForm(Panel03ColumnsConfig, panelBlock03, divPanelBlock03)

					// append divPanelBlock03 --> panelBlock03 --> tabContainer
					panelBlock03.appendChild(divPanelBlock03)
					tabContainer.appendChild(panelBlock03)
				
				
					return tabContainer;
				}
				
				
				// ######################################################
				// END of JS Functions HTML Element Creation section
				// END of JS Functions HTML Element Creation section
				// ######################################################


				// ######################################################
				// START of JS Functions Event Handling section
				// START of JS Functions Event Handling section
				// ######################################################

				function generateNodesEvent(event) {
					// Your event handling logic here
					//- Add a click event listener to the 'Generate' button
					//- Get the number of node from the input field  
					console.log('generateNodesButton clicked')
					const numNodes = document.getElementById('generateNodesInput').value;
					console.log(numNodes)
					//- Check if the number of node is empty  
					if (numNodes === null) {
						//- if node number empty do nothing 
						return;
					}
					const numNodesToGenerate = parseInt(numNodes, 10);
					//- Check if the number of node is positive 
					if (isNaN(numNodesToGenerate) || numNodesToGenerate <= 0) {
						//- Invalid input
						appendMessage("Error:" + "Bro, you gotta enter a valid positive number, come on!");
						return;
					}
					//- Generate nodes with random positions
					for (let i = 0; i < numNodesToGenerate; i++) {
						const nodeName = `node-${i + 1}`;
						const newNode = {
							group: 'nodes',
							data: {
								id: nodeName,
								name: nodeName,
							},
							position: {
								x: Math.random() * 400,
								y: Math.random() * 400
							}
						};
						//-cy.add(newNode);
						try {
							cy.add(newNode);
							//- throw new Error('This is an example exception');
						} catch (error) {
							//- Log the exception to the console
							console.error("An exception occurred:", error);
							//- Log the exception to notification message to the textarea 
							appendMessage("An exception occurred:" + error);
						}
					}
					//- Generate random edges between nodes
					for (let i = 0; i < numNodesToGenerate; i++) {
						const sourceNode = `node-${i + 1}`;
						const targetNode = `node-${Math.floor(Math.random() * numNodesToGenerate) + 1}`;
						if (sourceNode !== targetNode) {
							const newEdge = {
								group: 'edges',
								data: {
									id: "from-" + sourceNode+ "-to-" + targetNode,
									name: "from-" + sourceNode+ "-to-" + targetNode,
									source: sourceNode,
									target: targetNode
								}
							};
							try {
								cy.add(newEdge);
								//- throw new Error('This is an example exception');
							} catch (error) {
								//- Log the exception to the console
								console.error("An exception occurred:", error);
								//- Log the exception to notification message to the textarea 
								appendMessage("An exception occurred::" + error);
							}
						}
					}
					//- run layout
					const layout = cy.layout({
						name: 'cola',
						nodeSpacing: 5,
						edgeLengthVal: 45,
						animate: true,
						randomize: false,
						maxSimulationTime: 1500
					});
					layout.run();
					//-//- Append a notification message to the textarea
					console.log("Info: " + `Boom! Just generated ${numNodesToGenerate} nodes with some random edges. That's how we roll!`);
					appendMessage("Info: " + `Boom! Just generated ${numNodesToGenerate} nodes with some random edges. That's how we roll!`);
				}

				function spawnNodeEvent(event) {
					//- Add a click event listener to the 'Submit' button in the hidden form
					//- Get the node name from the input field 
					const nodeName = document.getElementById('nodeName').value;
					console.log(nodeName)
					//- Check if a node name is empty 
					if (nodeName == "") {
						//- append message in textArea 
						appendMessage('Error: Enter node name.');
						return;
					}
					//- Check if a node with the same name already exists 
					if (cy.$(`node[id = "${nodeName}"]`).length > 0) {
						//- append message in textArea 
						appendMessage('Error: Node with this name already exists.');
						return;
					}
					//- Create a new node element 
					const newNode = {
						group: 'nodes',
						data: {
							id: nodeName,
							name: nodeName,
							label: nodeName
						}
					};
					//- Add the new node to Cytoscape.js 
					cy.add(newNode);
					//- Randomize the positions and center the graph 
					const layout = cy.layout({
						name: 'cola',
						nodeSpacing: 5,
						edgeLengthVal: 45,
						animate: true,
						randomize: false,
						maxSimulationTime: 1500
					});
					layout.run();
					//- Append a notification message to the textarea 
					console.log("Info: " + `Nice! Node "${nodeName}" added successfully.`);
					appendMessage("Info: " + `Nice! Node "${nodeName}" added successfully.`);
				}

				function nodeFindEvent(event) {
					//- Get a reference to your Cytoscape instance (assuming it's named 'cy')
					//- const cy = window.cy; //- Replace 'window.cy' with your actual Cytoscape instance
					//- Find the node with the specified name
					const nodeName = document.getElementById('nodeFindInput').value;
					const node = cy.$(`node[name = "${nodeName}"]`);
					//- Check if the node exists
					if (node.length > 0) {
						// console
						console.log("Info: " + "Sweet! Node \"" + nodeName + "\" is in the house.");
						appendMessage("Info: " + "Sweet! Node \"" + nodeName + "\" is in the house.");
						//- Apply a highlight style to the node
						node.style({
							'border-color': 'red',
							'border-width': '2px',
							'background-color': 'yellow'
						});
						//- Zoom out on the node
						cy.fit()
						//- Zoom in on the node
						cy.animate({
							zoom: {
								level: 5,
								position: {
									x: node.position('x'),
									y: node.position('y')
								},
								renderedPosition: {
									x: node.renderedPosition('x'),
									y: node.renderedPosition('y')
								}
							},
							duration: 1500
						});
					} else {
						console.error(`Bro, I couldn't find a node named "${nodeName}". Try another one.`);
						appendMessage(`Bro, I couldn't find a node named "${nodeName}". Try another one.`);
			
					}
				}

				function zoomToFitEvent(event) {
					const initialZoom = cy.zoom();
					appendMessage(`Bro, initial zoom level is "${initialZoom}".`);
					//- Fit all nodes possible with padding
					cy.fit();
					const currentZoom = cy.zoom();
					appendMessage(`And now the zoom level is "${currentZoom}".`);
				}

				function pathFinderDijkstraEvent(event) {
					// Usage example:
					// highlightShortestPath('node-a', 'node-b'); // Replace with your source and target node IDs
					//- Function to get the default node style from cy-style.json
					//- weight: (edge) => 1, // You can adjust the weight function if needed
					//- weight: (edge) => edge.data('distance')
								
					// Remove existing highlight from all edges
					cy.edges().forEach(edge => {
						edge.removeClass('spf');
							});

					// Get the node sourceNodeId from pathFinderSourceNodeInput and targetNodeId from pathFinderTargetNodeInput  
					const sourceNodeId = document.getElementById('pathFinderSourceNodeInput').value;
					const targetNodeId = document.getElementById('pathFinderTargetNodeInput').value;

					// Assuming you have 'cy' as your Cytoscape instance
					const sourceNode = cy.$(`node[id="${sourceNodeId}"]`);
					const targetNode = cy.$(`node[id="${targetNodeId}"]`);
			
					console.log("Info: " + "Let's find the path from-" + sourceNodeId + "-to-"  + targetNodeId + "!");
					appendMessage("Info: " + "Let's find the path from-" + sourceNodeId + "-to-"  + targetNodeId + "!");
			
					// Check if both nodes exist
					if (sourceNode.length === 0 || targetNode.length === 0) {
						console.error(`Bro, couldn't find the source or target node you specified. Double-check the node names.`);
						appendMessage(`Bro, couldn't find the source or target node you specified. Double-check the node names.`);
						return;
					}
			
			    	// Get the Dijkstra result with the shortest path
			    	const dijkstraResult = cy.elements().dijkstra({
			    		root: sourceNode,
			    		weight: (edge) => 1, 
			    		// Use the custom weight attribute
			    		// weight: edge => edge.data('customWeight'),
                    
			    	});
			    	// Get the shortest path from Dijkstra result
			    	const shortestPathEdges = dijkstraResult.pathTo(targetNode);
                    console.log(shortestPathEdges)
                
                    // Check if there is a valid path (shortestPathEdges is not empty)
                    if (shortestPathEdges.length > 1) {
                        
			    		//// Apply a style to highlight the shortest path edges
			    		// shortestPathEdges.style({
			    		//	'line-color': 'red', 
			    		//	'line-style': 'solid', 
			    		// });
                        
			    		// Highlight the shortest path
			    		shortestPathEdges.forEach(edge => {
			    			edge.addClass('spf'); 
			    				});
                            
			    		//- Zoom out on the node
			    		cy.fit()
                            
			    		//- Zoom in on the node
			    		cy.animate({
			    			zoom: {
			    				level: 5,
			    				position: {
			    					x: sourceNode.position('x'),
			    					y: sourceNode.position('y')
			    				},
			    				renderedPosition: {
			    					x: sourceNode.renderedPosition('x'),
			    					y: sourceNode.renderedPosition('y')
			    				}
			    			},
			    			duration: 1500
			    		});
			    		// throw log
			    		console.log("Info: " + "Yo, check it out! Shorthest Path from-" + sourceNodeId + "-to-"  + targetNodeId + " has been found.");
			    		appendMessage("Info: " + "Yo, check it out! Shorthest Path from-" + sourceNodeId + "-to-"  + targetNodeId + " has been found, below is the path trace..");
			    		console.log(shortestPathEdges)
                    
			    		shortestPathEdges.forEach(edge => {
			    			console.log('Edge ID:', edge.id());
			    			console.log('Source Node ID:', edge.source().id());
			    			console.log('Target Node ID:', edge.target().id());
                        
			    			edgeId = edge.id();
			    			sourceNodeId = edge.source().id();
			    			targetNodeId = edge.target().id();
			    			// You can access other properties of the edge, e.g., source, target, data, etc.
                        
			    			appendMessage("Info: " + 'Edge ID: ' + edgeId )
			    			appendMessage("Info: " + 'Source Node ID: ' + sourceNodeId )
			    			appendMessage("Info: " + 'Target Node ID: ' + targetNodeId )			
			    		});
			    	
                        
                    }else{
                        console.error(`Bro, there is no path from "${sourceNodeId}" to "${targetNodeId}".`);
                        appendMessage(`Bro, there is no path from "${sourceNodeId}" to "${targetNodeId}".`);
                        return;
                    }
                }
				
				function closePanel01Event(event) {
					var panel = document.getElementById('Panel-01');
					if (panel.style.display === 'none' || panel.style.display === '') {
						//- Show the panel
						panel.style.display = 'block';
						panel.classList.toggle('active');
					} else {
						//- Hide the panel
						panel.style.display = 'none';
					}
					isPanel01Added = false
					console.log("Panel-01.style: " + document.getElementById('Panel-01').style.display)
				}
				// ######################################################
				// End of JS Functions Event Handling section
				// End of JS Functions Event Handling section
				// ######################################################


				// ######################################################
				// Start of JS Generic Functions
				// Start of JS Generic Functions
				// ######################################################

				//- Helper Function for managed Panel-01 tabs
				function showPanel01Tab(tabId) {
					hideAllTabs();
					document.getElementById(tabId).style.display = 'block';
				}

				// Function to remove an element by its id
				function removeElementById(id) {
					const elementToRemove = document.getElementById(id);
					console.log (elementToRemove)
				    if (elementToRemove) {
				        elementToRemove.remove();
				    }
				}

				//- Function to get the default node style from cy-style.json
				async function getDefaultNodeStyle(node) {
					try {
						//- Fetch the cy-style.json file
						const response = await fetch('cy-style.json');
						//- Check if the response is successful (status code 200)
						if (!response.ok) {
							throw new Error(`Failed to fetch cy-style.json (${response.status} ${response.statusText})`);
						}
						//- Parse the JSON response
						const styleData = await response.json();
						//- Extract the default node style from the loaded JSON
						//- Adjust this based on your JSON structure
						const defaultNodeStyle = styleData[0].style;
						return defaultNodeStyle;
					} catch (error) {
						console.error('Error loading cy-style.json:', error);
						appendMessage(`Error loading cy-style.json: ${error}`);
						//- Return a default style in case of an error
						return {
							'background-color': 'blue',
							'border-color': 'gray',
							'border-width': '1px'
						};
					}
				}

				//-Panel-02 Function to append message function
				function appendMessage(message) {
					const textarea = document.getElementById('notificationTextarea');
					// Get the current date and time
					const timestamp = new Date().toLocaleString();
			
					textarea.value += `[${timestamp}] ${message}\n` ;
					textarea.scrollTop = textarea.scrollHeight;
				}
				
				// Panel-02 Function to copy textarea content to clipboard
				function copyToClipboard() {
					const textarea = document.getElementById('notificationTextarea');
					textarea.select();
					document.execCommand('copy');
					}

				//-Panel-02 Function to add a click event listener to the copy button
				const copyButton = document.getElementById('copyToClipboardButton');
                copyButton.className = 'button is-smallest-element';
				copyButton.addEventListener('click', copyToClipboard);	
					

				// ######################################################
				// End of JS Generic Functions section
				// End of JS Generic Functions section
				// ######################################################


			
			});
			</script>
		</div>
	</body>
</html>
