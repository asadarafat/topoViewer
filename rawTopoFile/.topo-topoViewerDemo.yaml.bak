name: topoViewerDemo

mgmt:
  ipv4-subnet: 20.20.20.0/24       # ipv4 range
  
topology:
  # defaults:
  #   env:
  #     topoFilePath: /root/topoViewer/rawTopoFile/clab

  nodes:
    topoviewer:
      kind: linux
      mgmt-ipv4: 20.20.20.100
      image: ghcr.io/asadarafat/topoviewer:development
      ports:
        - 8081:8081
      exec:
        - /opt/topoviewer/topoviewer clab -H 138.203.26.59  -p 8081 -u root -j local-bind/topo-file.yaml 
        # "138.203.26.59" is the server IP where clab is running
        # "root" is the ContainerLab host user name
        # 8081 is the port where topoviewer service run
      entrypoint: /bin/bash
      binds:
        - __clabDir__/topology-data.json:/opt/topoviewer/local-bind/topo-file.yaml:ro
          # /root/topoViewer/rawTopoFile/clab/topoViewerDemo/topology-data.json is the absolute path clab's json file which generated by "clab --export-template"
      group: 8 
      labels:
        topo-viewer-role: controller
    srl-01:
      kind: srl
      mgmt-ipv4: 20.20.20.201
      image: ghcr.io/nokia/srlinux
    srl-02:
      kind: srl
      mgmt-ipv4: 20.20.20.202
      image: ghcr.io/nokia/srlinux
   

  links:
    - endpoints: ["srl-01:e1-1", "srl-01:e1-2"]
