name: topoViewerDemo

mgmt:
  ipv4-subnet: 20.20.20.0/24       # ipv4 range
  
topology:
  nodes:
    topoviewer:
      kind: linux
      mgmt-ipv4: 20.20.20.100
      image: ghcr.io/asadarafat/topoviewer:development
      ports:
        - 8081:8081
      exec:
        - /opt/topoviewer/topoviewer clab -H 149.204.21.68  -p 8081 -u root -j local-bind/topo-file.yaml 
        # "149.204.21.68" is the server IP where clab is running
        # "root" is the ContainerLab host user name
        # 8081 is the port where topoViewer service run
      entrypoint: /bin/bash
      binds:
        - __clabDir__/topology-data.json:/opt/topoviewer/local-bind/topo-file.yaml:ro
          # __clabDir__/topology-data.json is path to clab's json file which generated by "clab --export-template"
      labels:
        topo-viewer-role: controller
    spine-01:
      kind: srl
      mgmt-ipv4: 20.20.20.201
      image: ghcr.io/nokia/srlinux
      group: spineGroup
      labels:
        topo-viewer-role: spine
    spine-02:
      kind: srl
      mgmt-ipv4: 20.20.20.202
      image: ghcr.io/nokia/srlinux
      group: spineGroup
      labels:
        topo-viewer-role: spine
    leaf-01:
      kind: srl
      mgmt-ipv4: 20.20.20.211
      image: ghcr.io/nokia/srlinux
      group: leafGroup
      labels:
        topo-viewer-role: leaf
    leaf-02:
      kind: srl
      mgmt-ipv4: 20.20.20.212
      image: ghcr.io/nokia/srlinux
      group: leafGroup
      labels:
        topo-viewer-role: leaf
    leaf-03:
      kind: srl
      mgmt-ipv4: 20.20.20.213
      image: ghcr.io/nokia/srlinux
      group: leafGroup
      labels:
        topo-viewer-role: leaf
    leaf-04:
      kind: srl
      mgmt-ipv4: 20.20.20.214
      image: ghcr.io/nokia/srlinux
      group: leafGroup
      labels:
        topo-viewer-role: leaf

  links:
    - endpoints: ["spine-01:e1-1", "leaf-01:e1-1"]
    - endpoints: ["spine-01:e1-2", "leaf-02:e1-1"]
    - endpoints: ["spine-01:e1-3", "leaf-03:e1-1"]
    - endpoints: ["spine-01:e1-4", "leaf-04:e1-1"]
    - endpoints: ["spine-02:e1-1", "leaf-01:e1-2"]
    - endpoints: ["spine-02:e1-2", "leaf-02:e1-2"]
    - endpoints: ["spine-02:e1-3", "leaf-03:e1-2"]
    - endpoints: ["spine-02:e1-4", "leaf-04:e1-2"]