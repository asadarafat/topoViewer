/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/cytoscape-edgehandles@4.0.1/cytoscape-edgehandles.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash.memoize"),require("lodash.throttle")):"function"==typeof define&&define.amd?define(["lodash.memoize","lodash.throttle"],t):"object"==typeof exports?exports.cytoscapeEdgehandles=t(require("lodash.memoize"),require("lodash.throttle")):e.cytoscapeEdgehandles=t(e._.memoize,e._.throttle)}(this,(function(e,t){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=12)}([function(e,t,i){"use strict";e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.filter((function(e){return null!=e})).forEach((function(t){Object.keys(t).forEach((function(i){return e[i]=t[i]}))})),e}},function(e,t,i){"use strict";var n=i(10),s=i(0);e.exports=function(e){return new n(s({cy:this},e))}},function(e,t,i){"use strict";e.exports={disableGestures:function(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var e=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,e),window.addEventListener("touchmove",this.preventDefault,e),window.addEventListener("wheel",this.preventDefault,e)}return this},resetGestures:function(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var e=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,e),window.removeEventListener("touchmove",this.preventDefault,e),window.removeEventListener("wheel",this.preventDefault,e)}return this},saveGestureState:function(){var e=this.cy;return this.lastPanningEnabled=e.panningEnabled(),this.lastZoomingEnabled=e.zoomingEnabled(),this.lastBoxSelectionEnabled=e.boxSelectionEnabled(),this}}},function(e,t,i){"use strict";e.exports={addCytoscapeListeners:function(){var e=this,t=this.cy,i=this.options;return this.addListener(t,"drag",(function(){return e.grabbingNode=!0})),this.addListener(t,"free",(function(){return e.grabbingNode=!1})),this.addListener(t,"tapstart","node",(function(t){var i=t.target;e.drawMode&&e.start(i)})),this.addListener(t,"tapdrag",(function(t){e.update(t.position)})),this.addListener(t,"tapdragover","node",(function(t){i.snap||e.preview(t.target)})),this.addListener(t,"tapdragout","node",(function(t){i.snap||e.unpreview(t.target)})),this.addListener(t,"tapend",(function(){e.stop()})),this}}},function(e,t,i){"use strict";e.exports={canConnect:function(e,t){return!e.same(t)},edgeParams:function(e,t){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0}},function(e,t,i){"use strict";e.exports={toggleDrawMode:function(e){var t=this.cy;return this.drawMode=null!=e?e:!this.drawMode,this.drawMode?(this.prevUngrabifyState=t.autoungrabify(),t.autoungrabify(!0),this.emit("drawon")):(t.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function(){return this.toggleDrawMode(!0)},disableDrawMode:function(){return this.toggleDrawMode(!1)}}},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=i(0),r=function(e){return(void 0===e?"undefined":n(e))===n("")},o=function(e){return(void 0===e?"undefined":n(e))===n([])&&null!=e.length};e.exports={makeEdges:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy,i=(this.options,this.presumptiveTargets),n=this.previewEles,a=this.active,h=this.sourceNode,u=this.targetNode,c=e?"eh-preview":"",l=t.collection(),d=this.canConnect(u);if(a&&d){if(!u||0===u.size())return n.remove(),void this.emit("cancel",this.mp(),h,i);if(!e)return n.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),h,u,n);var v,p,f,m,g=t.add((v={group:"edges",data:{source:h.id(),target:u.id()}},p=this.edgeParams(u),f=c,s(m={},p,v),s(m.data,p.data,v.data),r(p.classes)?m.classes=p.classes+" "+f:o(p.classes)?m.classes=p.classes.join(" ")+" "+f:m.classes=f,m));return l=l.merge(g),e?(this.previewEles=l,l.style("events","no")):(l.style("events",""),this.emit("complete",this.mp(),h,u,l)),this}},makePreview:function(){return this.makeEdges(!0),this},removePreview:function(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function(){var e=this,t=this.sourceNode,i=this.ghostNode,n=this.cy,r=this.mx,o=this.my,a=void 0,h=void 0;if(t)return i&&0!==i.length&&!i.removed()||(h=this.ghostEles=n.collection(),n.batch((function(){(i=e.ghostNode=n.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var r={};(a=n.add(s({},r,{group:"edges",data:s({},r.data,{source:t.id(),target:i.id()}),classes:"eh-ghost eh-ghost-edge"}))).style({events:"no"})})),h.merge(i).merge(a)),i.position({x:r,y:o}),this}}},function(e,t,i){"use strict";e.exports={disableEdgeEvents:function(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(e,t,i){"use strict";e.exports={enable:function(){return this.enabled=!0,this.emit("enable"),this},disable:function(){return this.enabled=!1,this.emit("disable"),this}}},function(e,t,i){"use strict";var n=i(13),s=Math.sqrt(2);e.exports={start:function(e){var t=this;if(this.canStartOn(e)){this.active=!0,this.sourceNode=e,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var i=function(e){return e.id()};this.canConnect=n((function(e){return t.options.canConnect(t.sourceNode,e)}),i),this.edgeParams=n((function(e){return t.options.edgeParams(t.sourceNode,e)}),i),this.emit("start",this.hp(),e)}},update:function(e){if(this.active){var t=e;return this.mx=t.x,this.my=t.y,this.updateEdge(),this.throttledSnap(),this}},preview:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.options,s=this.sourceNode,r=this.ghostNode,o=this.ghostEles,a=this.presumptiveTargets,h=this.previewEles,u=this.active,c=s,l=e.same(r),d=!this.canConnect(e),v=e.same(this.targetNode);if(!u||l||d||v)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var p=function(){t.targetNode=e,a.merge(e),e.addClass("eh-presumptive-target"),e.addClass("eh-target"),t.emit("hoverover",t.mp(),c,e),e.addClass("eh-preview"),o.addClass("eh-preview-active"),s.addClass("eh-preview-active"),e.addClass("eh-preview-active"),t.makePreview(),t.emit("previewon",t.mp(),c,e,h)};return i&&n.hoverDelay>0?this.previewTimeout=setTimeout(p,n.hoverDelay):p(),!0},unpreview:function(e){if(this.active){var t=this.previewTimeout,i=this.sourceNode,n=this.previewEles,s=this.ghostEles,r=this.cy;clearTimeout(t),this.previewTimeout=null;var o=i;return e.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),s.removeClass("eh-preview-active"),i.removeClass("eh-preview-active"),this.targetNode=r.collection(),this.removePreview(o,e),this.emit("hoverout",this.mp(),o,e),this.emit("previewoff",this.mp(),o,e,n),this}},stop:function(){if(this.active){var e=this.sourceNode,t=this.targetNode,i=this.ghostEles,n=this.presumptiveTargets;return clearTimeout(this.previewTimeout),e.removeClass("eh-source eh-preview-active"),t.removeClass("eh-target eh-preview eh-hover eh-preview-active"),n.removeClass("eh-presumptive-target"),this.makeEdges(),i.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),e),this}},snap:function(){if(!this.active||!this.options.snap)return!1;var e=this.cy,t=this.targetNode,i=this.options.snapThreshold,n=this.mp(),r=this.previewEles,o=this.ghostNode,a=function(e,t,i,n){var s=i-e,r=n-t;return s*s+r*r},h=function(e){return t=e.position(),i=n,a(t.x,t.y,i.x,i.y);var t,i},u=function(e){var t=function(e){return s*Math.max(e.outerWidth(),e.outerHeight())/2}(e),n=t+i;return n*n},c=function(e){return h(e)<=u(e)},l=function(e){var t=e.position(),i=e.outerWidth()/2,s=e.outerHeight()/2,r=t.x,o=t.y,h=n.x,u=n.y,c=r-i,l=r+i,d=o-s,v=o+s,p=c<=h&&h<=l,f=d<=u&&u<=v;if(p&&f)return 0;if(p){var m=u-d,g=u-v;return Math.min(m*m,g*g)}if(f){var y=h-c,b=h-l;return Math.min(y*y,b*b)}return h<c&&u<d?a(h,u,c,d):h>l&&u<d?a(h,u,l,d):a(h,u,h<c&&u>v?c:l,v)},d=function(e,t){return l(e)-l(t)},v=function(e){var t=n,i=e.outerWidth()/2,s=e.outerHeight()/2,r=e.position(),o=r.x-i,a=r.x+i,h=r.y-s,u=r.y+s;return o<=t.x&&t.x<=a&&h<=t.y&&t.y<=u},p=e.nodes((function(e){return!function(e){return e.same(r)||e.same(o)}(e)&&c(e)})).sort(d),f=!1;t.nonempty()&&!c(t)&&this.unpreview(t);for(var m=0;m<p.length;m++){var g=p[m];if((!g.isParent()||!v(g))&&((!g.isChild()||v(g.parent()))&&(g.same(t)||this.preview(g,false)))){f=!0;break}}return f},canStartOn:function(e){var t,i=this.previewEles,n=this.ghostEles,s=this.enabled,r=this.active,o=this.grabbingNode;return s&&!r&&!o&&null!=e&&e.nonempty()&&!(function(e){return i.anySame(e)}(t=e)||function(e){return n.anySame(e)}(t))},canStartDrawModeOn:function(e){return this.canStartOn(e)&&this.drawMode},canStartNonDrawModeOn:function(e){return this.canStartOn(e)&&!this.drawMode}}},function(e,t,i){"use strict";var n=i(4),s=i(0),r=i(14),o=i(2),a=i(3),h=i(5),u=i(6),c=i(8),l=i(9),d=i(11),v=i(7);function p(e){var t=e.cy;this.cy=t,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=s({},n,e),this.saveGestureState(),this.addListeners(),this.throttledSnap=r(this.snap.bind(this),1e3/e.snapFrequency),this.preventDefault=function(e){return e.preventDefault()},this.canConnect=function(){return!1};var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,o)}catch(e){}this.windowListenerOptions=!i||{capture:!0,passive:!1}}var f=p.prototype={};f.destroy=function(){this.removeListeners()},f.setOptions=function(e){s(this.options,e)},f.mp=function(){return{x:this.mx,y:this.my}},f.hp=function(){return{x:this.hx,y:this.hy}},f.clearCollections=function(){var e=this.cy;this.previewEles=e.collection(),this.ghostEles=e.collection(),this.ghostNode=e.collection(),this.sourceNode=e.collection(),this.targetNode=e.collection(),this.presumptiveTargets=e.collection()},[o,a,h,u,c,l,d,v].forEach((function(e){return s(f,e)})),e.exports=p},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function s(e,t,i,s,r){return(void 0===i?"undefined":n(i))!==n("")&&(r=s=i,i=null),null==r&&(r=!1),{target:e,event:t,selector:i,callback:s,options:r}}function r(e){return e instanceof Element}e.exports={addListener:function(e,t,i,n,o){var a=s(e,t,i,n,o);return this.listeners.push(a),r(a.target)?a.target.addEventListener(a.event,a.callback,a.options):a.selector?a.target.addListener(a.event,a.selector,a.callback,a.options):a.target.addListener(a.event,a.callback,a.options),this},addListeners:function(){var e=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",(function(){return e.destroy()})),this},removeListener:function(e,t,i,n,o){for(var a=s(e,t,i,n,o),h=this.listeners.length-1;h>=0;h--){var u=this.listeners[h];if(!(a.target!==u.target||a.event!==u.event||null!=a.selector&&a.selector!==u.selector||null!=a.callback&&a.callback!==u.callback)){this.listeners.splice(h,1),r(a.target)?a.target.removeEventListener(a.event,a.callback,a.options):a.selector?a.target.removeListener(a.event,a.selector,a.callback,a.options):a.target.removeListener(a.event,a.callback,a.options);break}}return this},removeListeners:function(){for(var e=this.listeners.length-1;e>=0;e--){var t=this.listeners[e];this.removeListener(t.target,t.event,t.selector,t.callback,t.options)}return this},emit:function(e,t){for(var i=this.cy,n=arguments.length,s=Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];return i.emit({type:"eh"+e,position:t},s),this}}},function(e,t,i){"use strict";var n=i(1),s=function(e){e&&e("core","edgehandles",n)};"undefined"!=typeof cytoscape&&s(cytoscape),e.exports=s},function(t,i){t.exports=e},function(e,i){e.exports=t}])}));
//# sourceMappingURL=/sm/80ecefc21ff5cd1d5600d22ea501c59b86f1ae7f77a409cc206471e44911e88c.map