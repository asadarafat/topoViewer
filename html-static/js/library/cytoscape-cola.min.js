var n,t;n=this,t=function(n){return function(n){var t={};function e(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:o})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=3)}([function(n,t,e){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i=e(1),a=e(2),r=e(5)||("undefined"!=typeof window?window.cola:null),c=e(4),u=function(n){return(void 0===n?"undefined":o(n))===o(0)},s=function(){},d=function(n,t){var e;return null!=(e=n)&&(void 0===e?"undefined":o(e))===o((function(){}))?n.apply(t,[t]):n};function f(n){this.options=i({},a,n)}f.prototype.run=function(){var n=this,t=this.options;n.manuallyStopped=!1;var e=t.cy,i=t.eles,a=i.nodes(),f=i.edges(),l=!1,p=a.filter((function(n){return n.isParent()})),y=a.subtract(p),h=t.boundingBox||{x1:0,y1:0,w:e.width(),h:e.height()};void 0===h.x2&&(h.x2=h.x1+h.w),void 0===h.w&&(h.w=h.x2-h.x1),void 0===h.y2&&(h.y2=h.y1+h.h),void 0===h.h&&(h.h=h.y2-h.y1);var g=function(){for(var n=0;n<a.length;n++){var o=a[n],i=o.layoutDimensions(t),r=o.scratch("cola");if(!r.updatedDims){var c=d(t.nodeSpacing,o);r.width=i.w+2*c,r.height=i.h+2*c}}a.positions((function(n){var t=n.scratch().cola,e=void 0;return!n.grabbed()&&y.contains(n)&&(e={x:h.x1+t.x,y:h.y1+t.y},u(e.x)&&u(e.y)||(e=void 0)),e})),a.updateCompoundBounds(),l||(v(),l=!0),t.fit&&e.fit(t.padding)},m=function(){t.ungrabifyWhileSimulating&&w.grabify(),e.off("destroy",S),a.off("grab free position",k),a.off("lock unlock",L),n.one("layoutstop",t.stop),n.trigger({type:"layoutstop",layout:n})},v=function(){n.one("layoutready",t.ready),n.trigger({type:"layoutready",layout:n})},x=t.refresh;x=t.refresh<0?1:Math.max(1,x);var b=n.adaptor=r.adaptor({trigger:function(n){var e=r.EventType?r.EventType.tick:null,o=r.EventType?r.EventType.end:null;switch(n.type){case"tick":case e:t.animate&&g();break;case"end":case o:g(),t.infinite||m()}},kick:function(){var e=function(){if(n.manuallyStopped)return m(),!0;var e=b.tick();return e&&t.infinite&&b.resume(),e};if(t.animate)c((function n(){(function(){for(var n=void 0,t=0;t<x&&!n;t++)n=n||e();return n})()||c(n)}));else for(;!e(););},on:s,drag:s});n.adaptor=b;var w=a.filter(":grabbable");t.ungrabifyWhileSimulating&&w.ungrabify();var S=void 0;e.one("destroy",S=function(){n.stop()});var k=void 0;a.on("grab free position",k=function(n){var t=this,e=t.scratch().cola,o=t.position();if(n.cyTarget===t||n.target===t)switch(n.type){case"grab":b.dragstart(e);break;case"free":b.dragend(e);break;case"position":e.px===o.x-h.x1&&e.py===o.y-h.y1||(e.px=o.x-h.x1,e.py=o.y-h.y1)}});var L=void 0;a.on("lock unlock",L=function(){var n=this,t=n.scratch().cola;t.fixed=n.locked(),n.locked()?b.dragstart(t):b.dragend(t)}),b.nodes(y.map((function(n,e){var o=d(t.nodeSpacing,n),i=n.position(),a=n.layoutDimensions(t);return n.scratch().cola={x:t.randomize||void 0===i.x?Math.round(Math.random()*h.w):i.x,y:t.randomize||void 0===i.y?Math.round(Math.random()*h.h):i.y,width:a.w+2*o,height:a.h+2*o,index:e,fixed:n.locked()}})));var D=[];if(t.alignment){var q=[],j=[];y.forEach((function(n){var e=d(t.alignment,n),o=n.scratch().cola.index;e&&(null!=e.x&&q.push({node:o,offset:e.x}),null!=e.y&&j.push({node:o,offset:e.y}))})),q.length>0&&D.push({type:"alignment",axis:"x",offsets:q}),j.length>0&&D.push({type:"alignment",axis:"y",offsets:j})}t.gapInequalities&&t.gapInequalities.forEach((function(n){var t=n.left.scratch().cola.index,e=n.right.scratch().cola.index;D.push({axis:n.axis,left:t,right:e,gap:n.gap,equality:n.equality})})),D.length>0&&b.constraints(D),b.groups(p.map((function(n,e){var o=d(t.nodeSpacing,n),i=function(t){return parseFloat(n.style("padding-"+t))},a=i("left")+o,r=i("right")+o,c=i("top")+o,u=i("bottom")+o;return n.scratch().cola={index:e,padding:Math.max(a,r,c,u),leaves:n.children().intersection(y).map((function(n){return n[0].scratch().cola.index})),fixed:n.locked()},n})).map((function(n){return n.scratch().cola.groups=n.children().intersection(p).map((function(n){return n.scratch().cola.index})),n.scratch().cola})));var I,O=void 0,E=void 0;if(null!=t.edgeLength?(O=t.edgeLength,E="linkDistance"):null!=t.edgeSymDiffLength?(O=t.edgeSymDiffLength,E="symmetricDiffLinkLengths"):null!=t.edgeJaccardLength?(O=t.edgeJaccardLength,E="jaccardLinkLengths"):(O=100,E="linkDistance"),b.links(f.stdFilter((function(n){return y.contains(n.source())&&y.contains(n.target())})).map((function(n){var t=n.scratch().cola={source:n.source()[0].scratch().cola.index,target:n.target()[0].scratch().cola.index};return null!=O&&(t.calcLength=d(O,n)),t}))),b.size([h.w,h.h]),null!=O&&b[E]((function(n){return n.calcLength})),t.flow){var T=void 0;(void 0===(I=t.flow)?"undefined":o(I))===o("")?T={axis:t.flow,minSeparation:50}:u(t.flow)?T={axis:"y",minSeparation:t.flow}:function(n){return null!=n&&(void 0===n?"undefined":o(n))===o({})}(t.flow)?((T=t.flow).axis=T.axis||"y",T.minSeparation=null!=T.minSeparation?T.minSeparation:50):T={axis:"y",minSeparation:50},b.flowLayout(T.axis,T.minSeparation)}return n.trigger({type:"layoutstart",layout:n}),b.avoidOverlaps(t.avoidOverlap).handleDisconnected(t.handleDisconnected).start(t.unconstrIter,t.userConstIter,t.allConstIter),t.infinite||setTimeout((function(){n.manuallyStopped||b.stop()}),t.maxSimulationTime),this},f.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},n.exports=f},function(n,t,e){n.exports=null!=Object.assign?Object.assign.bind(Object):function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return e.forEach((function(t){Object.keys(t).forEach((function(e){return n[e]=t[e]}))})),n}},function(n,t,e){var o={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(n){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};n.exports=o},function(n,t,e){var o=e(0),i=function(n){n&&n("layout","cola",o)};"undefined"!=typeof cytoscape&&i(cytoscape),n.exports=i},function(n,t,e){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i=void 0;i="undefined"!==("undefined"==typeof window?"undefined":o(window))?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame:function(n){n()},n.exports=i},function(t,e){t.exports=n}])},"object"==typeof exports&&"object"==typeof module?module.exports=t(require("webcola")):"function"==typeof define&&define.amd?define(["webcola"],t):"object"==typeof exports?exports.cytoscapeCola=t(require("webcola")):n.cytoscapeCola=t(n.webcola);